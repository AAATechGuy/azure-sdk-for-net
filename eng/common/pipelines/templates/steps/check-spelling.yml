# This Yaml Document has been converted by ESAI Yaml Pipeline Conversion Tool.
# Please make sure to check all the converted content, it is your team's responsibility to make sure that the pipeline is still valid and functions as expected.
parameters:
  ContinueOnError: true
  CspellConfigPath: ./.vscode/cspell.json
steps:
- ${{ if eq(variables['Build.Reason'], 'PullRequest') }}:
  - task: NodeTool@0
    condition: and(succeededOrFailed(), ne(variables['Skip.SpellCheck'],'true'))
    inputs:
      versionSpec: 18.x
    displayName: Use Node.js 18.x
  - task: PowerShell@2
    displayName: Check spelling (cspell)
    condition: and(succeededOrFailed(), ne(variables['Skip.SpellCheck'],'true'))
    continueOnError: ${{ parameters.ContinueOnError }}
    inputs:
      targetType: filePath
      filePath: eng/common/scripts/check-spelling-in-changed-files.ps1
      arguments: >-
        -CspellConfigPath ${{ parameters.CspellConfigPath }} -ExitWithError:(!$${{ parameters.ContinueOnError }})
      pwsh: true